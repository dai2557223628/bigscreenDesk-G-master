webpackJsonp([16],{"6S9n":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("6FMM"),i=a("F523"),s=a("weGg"),r=a("udzu"),o={name:"notice",components:{Nav:l.a,leftNav:i.a},props:{},data:()=>({title:"",options:[],riskArr:[],add_time:"",currentpage:1,pages:"",authorArr:[],authorVal:"",tableData:[]}),created(){this.listFn(),this.authorFn()},methods:{async listFn(){var t={page:this.currentpage};let e=await s.a.noticeList(t);this.tableData=e.list;for(let t=0;t<e.list.length;t++)this.$set(this.tableData[t],"times",Object(r.a)(1e3*e.list[t].add_time)),this.$set(this.tableData[t],"dates",Object(r.a)(1e3*e.list[t].active_time_begin)+"至"+Object(r.a)(1e3*e.list[t].active_time_end));this.pages=e.pagecount},pageFn(t){this.currentpage=t,this.searchFn()},goDetailFn(t){let e=this.$router.resolve({path:"/notice_detail",query:{id:t.id}});window.open(e.href,"_blank")},async searchFn(t){let e,a;1==t&&(this.currentpage=1),this.add_time&&(e=this.add_time[0]/1e3,a=this.add_time[1]/1e3);var l={page:this.currentpage,q:this.title,author:this.authorVal,add_time_start_begin:e,add_time_start_end:a};let i=await s.a.noticeList(l);this.tableData=i.list;for(let t=0;t<i.list.length;t++)this.$set(this.tableData[t],"times",Object(r.a)(1e3*i.list[t].add_time)),this.$set(this.tableData[t],"dates",Object(r.a)(1e3*i.list[t].active_time_begin)+"至"+Object(r.a)(1e3*i.list[t].active_time_end));this.pages=i.pagecount},async authorFn(){let t=await s.a.authorList({hide_empty_notice:1});this.authorArr=t.list}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice"},[a("Nav",{attrs:{homeShow:!1}}),a("div",{staticClass:"employee_bg"},[a("leftNav",{attrs:{title:"安全信息"}}),a("div",{staticClass:"employee_search"},[a("div",{staticClass:"employee_search_con"},[a("div",{staticClass:"search_li"},[a("label",[t._v("标题：")]),a("el-input",{staticClass:"title_input",attrs:{placeholder:"请输入关键词",clearable:"clearable"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("div",{staticClass:"search_li margin_top15"},[a("label",[t._v("发布人：")]),a("el-select",{attrs:{filterable:"filterable",placeholder:"请选择",clearable:"clearable"},model:{value:t.authorVal,callback:function(e){t.authorVal=e},expression:"authorVal"}},t._l(t.authorArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.username,value:t.username}})}),1),a("label",{staticStyle:{"margin-left":"20px"}},[t._v("发布时间：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.add_time,callback:function(e){t.add_time=e},expression:"add_time"}}),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.searchFn(t.index)}}},[t._v("查询")])],1)])]),a("div",{staticClass:"employee_form"},[a("el-table",{attrs:{data:t.tableData,"header-cell-style":{background:"#EEEEEE"}}},[a("el-table-column",{attrs:{prop:"id",label:"编号","min-width":"90"}}),a("el-table-column",{attrs:{prop:"title",label:"公告标题","min-width":"200","show-overflow-tooltip":"show-overflow-tooltip"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.read?a("span",[t._v(t._s(e.row.title))]):a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"dates",label:"有效时间","min-width":"180","show-overflow-tooltip":"show-overflow-tooltip"}}),a("el-table-column",{attrs:{prop:"times",label:"发布时间","min-width":"140"}}),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"look_details",on:{click:function(a){return t.goDetailFn(e.row)}}},[e.row.read?a("span",{staticStyle:{color:"gray"}},[t._v("已读，查看详情")]):a("span",[t._v("查看详情")])])]}}])})],1),a("el-pagination",{attrs:{background:"background",layout:"prev, pager, next","current-page":t.currentpage,total:10*t.pages},on:{"current-change":t.pageFn}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,n,!1,function(t){a("rEzA"),a("NINX")},"data-v-7b0433ac",null);e.default=c.exports},NINX:function(t,e){},rEzA:function(t,e){}});