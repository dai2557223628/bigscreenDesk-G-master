webpackJsonp([15],{TlYN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("6FMM"),i=a("F523"),s=a("SMmS"),o=a("weGg"),n={name:"bulletin",components:{Nav:l.a,leftNav:i.a,coverDialog:s.a},data:()=>({dates:"",title:"",options:[],checkListType:[],follow:!1,searchShow:!1,dialogTurn:!1,add_time:"",expire_time:"",value:"",currentpage:1,pages:"",optionsId:"",followList:"",followName:"",followArrs:"",tableData:[],typeList:[{id:1,name:"政治事件"},{id:2,name:"武装冲突"},{id:3,name:"宗教或教派冲突"},{id:4,name:"民族矛盾或部落冲突"},{id:5,name:"战争"},{id:6,name:"恐怖主义"},{id:7,name:"社会治安"},{id:8,name:"群体性事件"},{id:9,name:"自然灾害"},{id:10,name:"事故和灾难"},{id:11,name:"疾病疫情"},{id:12,name:"其它"},{id:80,name:"经济事件"},{id:84,name:"涉华舆论舆情"},{id:83,name:"难民潮"}]}),created(){this.listFn(),this.areaListFn(),this.followCountry()},methods:{async followCountry(){let e=await o.a.myInfo(),t=[];null==e.info.follow_area_ids?(e.info.follow_area_ids=[],this.followList=[],this.followArrs=e.info.follow_area_list):(this.followList=e.info.follow_area_ids.split(","),this.followArrs=e.info.follow_area_list,e.info.follow_area_list.map(e=>{t.push(e.area_name)}),this.followName=t.join("、"))},async listFn(){var e={page:this.currentpage};let t=await o.a.bulletinList(e);this.tableData=t.list,this.pages=t.pagecount},async areaListFn(){let e=await o.a.areaList({pagesize:9999});this.options=e.list},warningSubmitSuccess(){this.dialogTurn=!1,this.followCountry()},pageFn(e){this.currentpage=e,this.searchFn()},goDetailFn(e){let t=this.$router.resolve({path:"/bulletin_detail",query:{id:e.news_id}});window.open(t.href,"_blank")},async searchFn(e){1==e&&(this.currentpage=1);let t,a,l,i,s=this.checkListType.join(",");this.add_time&&(t=this.add_time[0]/1e3,a=this.add_time[1]/1e3),this.expire_time&&(i=this.expire_time[0]/1e3,l=this.expire_time[1]/1e3);var n={title:this.title,area_id:this.optionsId,page:this.currentpage,add_time_start_begin:t,add_time_start_end:a,occur_time_start_begin:i,occur_time_start_end:l,special_class_cid:s,limit_in_follow_country:this.follow?1:""};""==s&&delete n.special_class_cid;let r=await o.a.bulletinList(n);this.tableData=r.list,this.pages=r.pagecount}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bulletin"},[a("Nav",{attrs:{homeShow:!1}}),a("div",{staticClass:"employee_bg"},[a("leftNav",{attrs:{title:"安全信息"}}),a("div",{staticClass:"employee_search"},[a("div",{staticClass:"employee_search_con"},[a("div",{staticClass:"search_li"},[a("label",[e._v("标题：")]),a("el-input",{staticClass:"title_input",attrs:{placeholder:"请输入关键词",clearable:"clearable"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("div",{staticClass:"search_li margin_top15"},[a("label",[e._v("事发地点：")]),a("el-select",{attrs:{filterable:"filterable",placeholder:"请选择",clearable:"clearable"},model:{value:e.optionsId,callback:function(t){e.optionsId=t},expression:"optionsId"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.full_area_name,value:e.id}})}),1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.searchFn(1)}}},[e._v("查询")])],1),e.searchShow?a("div",{staticClass:"search_li margin_top15"},[a("label",[e._v("事件类型：")]),a("el-checkbox-group",{model:{value:e.checkListType,callback:function(t){e.checkListType=t},expression:"checkListType"}},e._l(e.typeList,function(t,l){return a("el-checkbox",{key:l,staticStyle:{"margin-top":"10px"},attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1):e._e(),e.searchShow?a("div",{staticClass:"search_li margin_top15"},[a("label",[e._v("事发时间：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:e.expire_time,callback:function(t){e.expire_time=t},expression:"expire_time"}}),a("label",{staticStyle:{"margin-left":"10px"}},[e._v("发布时间：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.add_time,callback:function(t){e.add_time=t},expression:"add_time"}})],1):e._e(),e.searchShow?a("div",{staticClass:"search_li margin_top15"},[a("el-checkbox",{model:{value:e.follow,callback:function(t){e.follow=t},expression:"follow"}},[e._v("只查看我关注的国家（选择后将一只保持直到主动取消）【"+e._s(e.followName)+"等"+e._s(e.followArrs.length)+"个国家】")]),a("span",{staticClass:"follow_city",on:{click:function(t){e.dialogTurn=!0}}},[a("i",{staticClass:"el-icon-plus"}),e._v("增减关注国家")])],1):e._e(),a("div",{staticClass:"search_li margin_top15",staticStyle:{"text-align":"center","font-size":"14px",color:"#888888",cursor:"pointer"}},[e.searchShow?a("span",{on:{click:function(t){e.searchShow=!e.searchShow}}},[e._v("收起筛选"),a("span",{staticClass:"iconfont iconshouqi",staticStyle:{"font-size":"12px","margin-left":"5px"}})]):a("span",{on:{click:function(t){e.searchShow=!e.searchShow}}},[e._v("展开刷选"),a("span",{staticClass:"iconfont iconzhankai",staticStyle:{"font-size":"12px","margin-left":"5px"}})])])])]),a("div",{staticClass:"employee_form"},[a("el-table",{attrs:{data:e.tableData,"header-cell-style":{background:"#EEEEEE"}}},[a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":"show-overflow-tooltip"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.read?a("span",[e._v(e._s(t.row.title))]):a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"country_name",label:"事发地点","min-width":"120"}}),a("el-table-column",{attrs:{prop:"occur_time",label:"事发时间","min-width":"120"}}),a("el-table-column",{attrs:{prop:"display_time",label:"发布时间","min-width":"120"}}),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"look_details",on:{click:function(a){return e.goDetailFn(t.row)}}},[e._v("查看详情")])]}}])})],1),a("el-pagination",{attrs:{background:"background",layout:"prev, pager, next","current-page":e.currentpage,total:10*e.pages},on:{"current-change":e.pageFn}}),e.followArrs?a("coverDialog",{attrs:{followArr:e.followArrs,followList:e.followList,dialogShow:e.dialogTurn},on:{dialogExit:function(t){e.dialogTurn=t},submitSuccess:e.warningSubmitSuccess}}):e._e()],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,r,!1,function(e){a("nB0B"),a("gh4H")},"data-v-f79ccbf0",null);t.default=c.exports},gh4H:function(e,t){},nB0B:function(e,t){}});