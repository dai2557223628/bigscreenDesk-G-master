webpackJsonp([12],{"22eJ":function(t,e,a){"use strict";var l=a("udzu"),i={name:"lafite_dialog",props:{dialogObj:{type:Object,default:()=>({})},warnShow:{type:Boolean,default:!1},dialogShow:{type:Boolean,default:!1}},data(){return{routers:this.$route.name}},created(){this.timeFn()},methods:{timeFn(){this.dialogObj.add_time&&(this.$set(this.dialogObj,"times",Object(l.a)(1e3*this.dialogObj.add_time)),this.$set(this.dialogObj,"add_time",Object(l.a)(1e3*this.dialogObj.add_time)))},handleClose(){this.$emit("dialogExit",!1)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"查看详情",visible:t.dialogShow,"modal-append-to-body":!1,"before-close":t.handleClose,width:"60%"}},["appear"!=t.routers?a("div",{staticClass:"dialog_con"},[a("div",{staticClass:"dialog_title"},[t._v(t._s(t.dialogObj.title))]),a("div",{staticClass:"dialog_time"},[t._v(" 发布时间: "+t._s(t.dialogObj.display_time||t.dialogObj.add_time||t.dialogObj.occur_time))]),a("div",{staticClass:"dialog_time"}),t.dialogObj.classname?a("div",{staticClass:"dialog_time"},[t._v(" 预警类型: "+t._s(t.dialogObj.classname))]):t._e(),t.dialogObj.author?a("div",{staticClass:"dialog_time"},[t._v(" 发布人: "+t._s(t.dialogObj.author))]):t._e(),t.warnShow?a("div",{staticClass:"dialog_mains"},[a("div",{staticClass:"dialog_trend"},[t._v(" 事件分析与发展趋势:")]),a("div",{staticClass:"dialog_trend_text"},[t._v(t._s(t.dialogObj.trend_prediction))]),a("div",{staticClass:"dialog_trend"},[t._v(" 提醒建议:")]),a("div",{staticClass:"dialog_trend_text"},[t._v(t._s(t.dialogObj.security_reminder))])]):a("div",{staticClass:"dialog_content",domProps:{innerHTML:t._s(t.dialogObj.content)}})]):a("div",{staticClass:"dialog_con2"},[a("div",{staticClass:"dialog_title"},[t._v("上报信息："+t._s(t.dialogObj.content))]),a("div",{staticClass:"dialog_title"},[t._v("上报人："+t._s(t.dialogObj.name))]),a("div",{staticClass:"dialog_title"},[t._v("上报时间："+t._s(t.dialogObj.times))]),a("div",{staticClass:"dialog_title"},[t._v("所在地区："+t._s(t.dialogObj.full_area_name))]),a("div",{staticClass:"dialog_title"},[t._v("所属项目："+t._s(t.dialogObj.project_name))]),a("div",{staticClass:"dialog_title"},[t._v("所在营地："+t._s(t.dialogObj.camp_name))])])])},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(t){a("xCnq")},"data-v-63b34cd8",null);e.a=o.exports},CcnC:function(t,e){},FQaV:function(t,e){},Zdq0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("6FMM"),i=a("F523"),s=a("22eJ"),o=a("SMmS"),n=a("weGg"),r={name:"warning",components:{Nav:l.a,leftNav:i.a,coverDialog:o.a,lafiteDialog:s.a},props:{},data:()=>({title:"",dates:"",name:"",options:[],checkList:[],checkListType:[],follow:!1,searchShow:!1,dialogTurn:!1,add_time:"",expire_time:"",value:"",currentpage:1,pages:"",optionsId:"",followList:"",followName:"",followArrs:"",tableData:[],dialogObjs:{},leftList:[{name:"预警提醒",path:"warning"},{name:"单位公告",path:"notice"},{name:"安全快讯",path:"bulletin"},{name:"员工上报",path:"appear"}]}),created(){this.followCountry(),this.selectListFn(),this.listFn()},methods:{async selectListFn(){let t=await n.a.areaList({pagesize:9999});this.options=t.list},async listFn(){var t={page:this.currentpage,type:2};let e=await n.a.warningList(t);this.tableData=e.list,this.pages=e.pagecount},warningSubmitSuccess(){this.dialogTurn=!1,this.followCountry()},async followCountry(){let t=await n.a.myInfo(),e=[];null==t.info.follow_area_ids?(t.info.follow_area_ids=[],this.followList=[],this.followArrs=t.info.follow_area_list):(this.followList=t.info.follow_area_ids.split(","),this.followArrs=t.info.follow_area_list,t.info.follow_area_list.map(t=>{e.push(t.area_name)}),this.followName=e.join("、"))},pageFn(t){this.currentpage=t,this.searchFn()},async warningInfoFn(t){var e={id:t};let a=await n.a.warningInfo(e);this.dialogObjs=a.info},goDetailFn(t){let e=this.$router.resolve({path:"/warning_detail",query:{id:t.news_id}});window.open(e.href,"_blank")},async searchFn(t){1==t&&(this.currentpage=1);let e,a,l,i,s=this.checkList.join(","),o=this.checkListType.join(",");this.add_time&&(e=this.add_time[0]/1e3,a=this.add_time[1]/1e3),this.expire_time&&(i=this.expire_time[0]/1e3,l=this.expire_time[1]/1e3);var r={title:this.title,area_id:this.optionsId,page:this.currentpage,level:s,cid:o,type:2,add_time_start_begin:e,add_time_start_end:a,expire_time_start_begin:i,expire_time_start_end:l,limit_in_follow_country:this.follow?1:""};let c=await n.a.warningList(r);this.tableData=c.list,this.pages=c.pagecount}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warning"},[a("Nav"),a("div",{staticClass:"employee_bg"},[a("leftNav",{attrs:{title:"安全信息"}}),a("div",{staticClass:"employee_search"},[a("div",{staticClass:"employee_search_con"},[a("div",{staticClass:"search_li"},[a("label",[t._v("标题：")]),a("el-input",{staticClass:"title_input",attrs:{placeholder:"请输入关键词",clearable:"clearable"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("div",{staticClass:"search_li margin_top15"},[a("label",[t._v("地区：")]),a("el-select",{attrs:{filterable:"filterable",placeholder:"请选择",clearable:"clearable"},model:{value:t.optionsId,callback:function(e){t.optionsId=e},expression:"optionsId"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.full_area_name,value:t.id}})}),1),a("label",{staticStyle:{"margin-left":"20px"}},[t._v("预警级别：")]),a("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[a("el-checkbox",{attrs:{label:"极高"}}),a("el-checkbox",{attrs:{label:"高"}}),a("el-checkbox",{attrs:{label:"中等"}})],1),a("label",{staticStyle:{"margin-left":"20px"}},[t._v("类型：")]),a("el-checkbox-group",{model:{value:t.checkListType,callback:function(e){t.checkListType=e},expression:"checkListType"}},[a("el-checkbox",{attrs:{label:"17"}},[t._v("官方预警")]),a("el-checkbox",{attrs:{label:"18"}},[t._v("官方提醒")])],1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.searchFn(1)}}},[t._v("查询")])],1),t.searchShow?a("div",{staticClass:"search_li margin_top15"},[a("label",[t._v("发布时间：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.add_time,callback:function(e){t.add_time=e},expression:"add_time"}}),a("label",{staticStyle:{"margin-left":"20px"}},[t._v("有效期：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.expire_time,callback:function(e){t.expire_time=e},expression:"expire_time"}})],1):t._e(),t.searchShow?a("div",{staticClass:"search_li margin_top15"},[a("el-checkbox",{model:{value:t.follow,callback:function(e){t.follow=e},expression:"follow"}},[t._v("只查看我关注的国家（选择后将一只保持直到主动取消）【"+t._s(t.followName)+"等"+t._s(t.followArrs.length)+"个国家】")]),a("span",{staticClass:"follow_city",on:{click:function(e){t.dialogTurn=!0}}},[a("i",{staticClass:"el-icon-plus"}),t._v("增减关注国家")])],1):t._e(),a("div",{staticClass:"search_li margin_top15",staticStyle:{"text-align":"center","font-size":"14px",color:"#888888",cursor:"pointer"}},[t.searchShow?a("span",{on:{click:function(e){t.searchShow=!t.searchShow}}},[t._v("收起筛选"),a("span",{staticClass:"iconfont iconshouqi",staticStyle:{"font-size":"12px","margin-left":"5px"}})]):a("span",{on:{click:function(e){t.searchShow=!t.searchShow}}},[t._v("展开刷选"),a("span",{staticClass:"iconfont iconzhankai",staticStyle:{"font-size":"12px","margin-left":"5px"}})])])])]),a("div",{staticClass:"employee_form"},[a("el-table",{attrs:{data:t.tableData,"header-cell-style":{background:"#EEEEEE"}}},[a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":"show-overflow-tooltip"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.read?a("span",[t._v(t._s(e.row.title))]):a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"country_name",label:"地区",width:"120"}}),a("el-table-column",{attrs:{prop:"level",label:"预警级别",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.level?a("span",{staticStyle:{color:"#FF1B1B"}},[t._v(t._s(e.row.level))]):a("span",[t._v("-")])]}}])}),a("el-table-column",{attrs:{prop:"classname",label:"类型",width:"90"}}),a("el-table-column",{attrs:{prop:"display_time",label:"发布时间","min-width":"120","show-overflow-tooltip":"show-overflow-tooltip"}}),a("el-table-column",{attrs:{prop:"expire_at",label:"有效期","min-width":"120","show-overflow-tooltip":"show-overflow-tooltip"}}),a("el-table-column",{attrs:{prop:"active",label:"生效状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.active?a("span",{staticStyle:{color:"#FF1B1B"}},[t._v("生效中")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"look_details",on:{click:function(a){return t.goDetailFn(e.row)}}},[t._v("查看详情")])]}}])})],1),a("el-pagination",{attrs:{background:"background","current-page":t.currentpage,layout:"prev, pager, next",total:10*t.pages},on:{"current-change":t.pageFn}}),t.followArrs?a("coverDialog",{attrs:{followArr:t.followArrs,followList:t.followList,dialogShow:t.dialogTurn},on:{dialogExit:function(e){t.dialogTurn=e},submitSuccess:t.warningSubmitSuccess}}):t._e()],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(t){a("FQaV"),a("CcnC")},"data-v-beb63548",null);e.default=d.exports},xCnq:function(t,e){}});