webpackJsonp([28],{pU4N:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("6FMM"),l=r("F523"),i=r("weGg"),o=r("Qw7B"),s=r("FSae"),n={name:"create_report",components:{Nav:a.a,leftNav:l.a,Copyright:s.a},data:()=>({expireTimeOption:{disabledDate:e=>e.getTime()>Date.now()},form:{},rules:{reportVal:[{required:!0,message:"请选择简报类型",trigger:"change"}],value_area_id:[{required:!0,message:"请选择简报分析国家",trigger:"change"}],timeVal:[{required:!0,message:"请选择简报时间段",trigger:"change"}]},options:[],reportArr:[{label:"全球公共安全风险简报",id:1},{label:"国家公共安全风险简报",id:2}],countryTurn:!1,leftList:[{name:"生成简报",path:"create_report"},{name:"简报列表",path:"report"}],addTurn:!1}),created(){this.selectListFn()},methods:{codeFn(e){-1!=e.indexOf("16")&&(this.addTurn=!0)},async selectListFn(){let e=await i.a.reportCountryList();this.options=e.list},getdate(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return r>=1&&r<=9&&(r="0"+r),a>=0&&a<=9&&(a="0"+a),t+"-"+r+"-"+a},reportFn(e){this.countryTurn=2==e},goList(){this.$router.push({path:"/report"})},submitFn(){this.$refs.forms.validate(e=>{if(!e)return!1;{var t;const{reportVal:e,timeVal:r,value_area_id:a}=this.form;t=1==e?"http://report.ciwei.com/#/g_home?sid="+o.a.getToken()+"&time_begin="+r/1e3:"http://report.ciwei.com/#/?sid="+o.a.getToken()+"&time_begin="+r/1e3+"&area_id="+a,window.open(t,"_blank")}})}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create_report"},[r("Nav",{attrs:{codeArr:["16"]},on:{getCode:e.codeFn}}),r("div",{staticClass:"employee_bg"},[r("leftNav",{attrs:{title:"安全简报",leftArr:e.leftList}}),r("div",{staticClass:"report_con"},[r("div",{staticClass:"report_con_box"},[r("div",{staticClass:"report_con_title"},[e._v("快速生成大屏简报")]),r("el-form",{ref:"forms",attrs:{"label-width":"180px",model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"简报类型",prop:"reportVal"}},[r("el-select",{attrs:{filterable:"filterable",placeholder:"请选择简报类型",clearable:"clearable"},on:{change:e.reportFn},model:{value:e.form.reportVal,callback:function(t){e.$set(e.form,"reportVal",t)},expression:"form.reportVal"}},e._l(e.reportArr,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e.countryTurn?r("el-form-item",{attrs:{label:"简报分析国家",prop:"value_area_id"}},[r("el-select",{attrs:{filterable:"filterable",placeholder:"请选择简报分析国家",clearable:"clearable"},model:{value:e.form.value_area_id,callback:function(t){e.$set(e.form,"value_area_id",t)},expression:"form.value_area_id"}},e._l(e.options,function(e){return r("el-option",{key:e.id,attrs:{label:e.area_name,value:e.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"选择简报内容涵盖时间段",prop:"timeVal"}},[r("el-date-picker",{staticStyle:{width:"194px"},attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp","picker-options":e.expireTimeOption},model:{value:e.form.timeVal,callback:function(t){e.$set(e.form,"timeVal",t)},expression:"form.timeVal"}}),r("span",{staticStyle:{"margin-left":"10px","font-size":"14px",color:"#333"}},[e._v("至")]),r("span",{staticStyle:{"margin-left":"10px","font-size":"14px",color:"#333"}},[e._v(e._s(e.getdate()))])],1),e.addTurn?r("el-button",{staticStyle:{"margin-left":"100px","margin-top":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.submitFn()}}},[e._v("生成大屏简报")]):e._e(),r("el-button",{on:{click:e.goList}},[e._v("查看历史简报")])],1)],1)])],1),r("Copyright",{staticClass:"c_footer"})],1)},staticRenderFns:[]};var p=r("VU/8")(n,c,!1,function(e){r("rDTw")},"data-v-645d0032",null);t.default=p.exports},rDTw:function(e,t){}});